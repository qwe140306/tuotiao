(function(e){function t(t){for(var r,a,o=t[0],i=t[1],s=t[2],f=0,l=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);h&&h(t);while(l.length)l.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c={app:0},u=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-00524f39":"74eae3ac","chunk-13a5f985":"64e15c94","chunk-1e8f8ab6":"846b59da","chunk-2d0a2e01":"05becb3e","chunk-2d0ab84e":"e336ea34","chunk-2d217eac":"d0ba0c49","chunk-752ee00c":"c1199ae1","chunk-f1aaea34":"35848b9b","chunk-46c0fee6":"7b3c820f","chunk-cdfb4582":"2ab911ce"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-00524f39":1,"chunk-13a5f985":1,"chunk-1e8f8ab6":1,"chunk-752ee00c":1,"chunk-46c0fee6":1,"chunk-cdfb4582":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-00524f39":"2f5cbdc1","chunk-13a5f985":"12305258","chunk-1e8f8ab6":"47db26d1","chunk-2d0a2e01":"31d6cfe0","chunk-2d0ab84e":"31d6cfe0","chunk-2d217eac":"31d6cfe0","chunk-752ee00c":"7cc27e19","chunk-f1aaea34":"31d6cfe0","chunk-46c0fee6":"5af1e5af","chunk-cdfb4582":"0050fe75"}[e]+".css",c=i.p+r,u=document.getElementsByTagName("link"),o=0;o<u.length;o++){var s=u[o],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===c))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],f=s.getAttribute("data-href");if(f===r||f===c)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||c,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],h.parentNode.removeChild(h),n(u)},h.href=c;var d=document.getElementsByTagName("head")[0];d.appendChild(h)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=u);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=o(e);var l=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(h);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}c[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=f;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("keep-alive",{attrs:{include:e.cachePages}},[n("router-view")],1)],1)},c=[],u=n("5530"),o=n("2f62"),i={name:"App",data:function(){return{}},computed:Object(u["a"])({},Object(o["b"])(["cachePages"]))},s=i,f=n("2877"),l=Object(f["a"])(s,a,c,!1,null,null,null),h=l.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("5319"),n("8c4f")),p=n("2241"),b=(n("caad"),n("2532"),n("c975"),n("a434"),n("5d2d"));r["a"].use(o["a"]);var m="user",k=new o["a"].Store({state:{user:Object(b["a"])(m),cachePages:["Layout"]},mutations:{setUser:function(e,t){e.user=t,Object(b["c"])(m,e.user)},addCachePages:function(e,t){e.cachePages.includes(t)||e.cachePages.push(t)},removeCachePages:function(e,t){var n=e.cachePages.indexOf(t);-1!==n&&e.cachePages.splice(n,1)}},actions:{},modules:{}});r["a"].use(d["a"]);var v=[{path:"/",component:function(){return n.e("chunk-2d0ab84e").then(n.bind(null,"162e"))},children:[{path:"",name:"home",component:function(){return Promise.all([n.e("chunk-f1aaea34"),n.e("chunk-46c0fee6")]).then(n.bind(null,"7abe"))},meta:{keepAlive:!0}},{path:"/qa",name:"qa",component:function(){return n.e("chunk-2d217eac").then(n.bind(null,"c988"))}},{path:"/video",name:"video",component:function(){return n.e("chunk-2d0a2e01").then(n.bind(null,"007b"))},meta:{requiresAuth:!0}},{path:"/my",name:"my",component:function(){return n.e("chunk-752ee00c").then(n.bind(null,"9639"))}}]},{name:"login",path:"/login",component:function(){return n.e("chunk-1e8f8ab6").then(n.bind(null,"9ed6"))}},{name:"search",path:"/search",component:function(){return Promise.all([n.e("chunk-f1aaea34"),n.e("chunk-cdfb4582")]).then(n.bind(null,"efe3"))}},{name:"article",path:"/article/:articleId",component:function(){return n.e("chunk-00524f39").then(n.bind(null,"230c"))},props:!0},{name:"userProfile",path:"/user/profile",component:function(){return n.e("chunk-13a5f985").then(n.bind(null,"524b"))}}],g=new d["a"]({routes:v});g.beforeEach((function(e,t,n){e.meta.requiresAuth?k.state.user?n():p["a"].confirm({title:"访问提示",message:"该功能需要登录才能访问，确认登录吗？"}).then((function(){g.replace({name:"login",query:{redirect:e.path}})})).catch((function(){n(!1)})):n()}));var y=g,w=n("1da1"),P=(n("96cf"),n("bc3a")),j=n.n(P),O=n("d604"),x=n.n(O),S=n("d399"),_=j.a.create({baseURL:"http://ttapi.research.itcast.cn"});function A(){y.replace({name:"login",query:{redirect:y.currentRoute.fullPath}})}j.a.defaults.baseURL="http://ttapi.research.itcast.cn",j.a.defaults.transformResponse=[function(e){try{return x.a.parse(e)}catch(t){return console.log("转换失败",t),e}}],j.a.interceptors.request.use((function(e){var t=k.state.user;return t&&(e.headers.Authorization="Bearer ".concat(t.token)),e}),(function(e){return Promise.reject(e)})),j.a.interceptors.response.use((function(e){return e}),function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.response.status,400!==n){e.next=5;break}S["a"].fail("客户端请求参数异常"),e.next=26;break;case 5:if(401!==n){e.next=25;break}if(r=k.state.user,r&&r.token){e.next=10;break}return Object(S["a"])({message:"未登录",position:"top"}),e.abrupt("return",A());case 10:return e.prev=10,e.next=13,_({method:"put",url:"/app/v1_0/authorizations",headers:{Authorization:"Bearer ".concat(r.refresh_token)}});case 13:return a=e.sent,c=a.data,r.token=c.data.token,k.commit("setUser",r),e.abrupt("return",j()(t.config));case 20:e.prev=20,e.t0=e["catch"](10),A();case 23:e.next=26;break;case 25:403===n?S["a"].fail("没有操作权限，请登录或稍后重试"):n>=500&&S["a"].fail("服务端异常，请稍后重试");case 26:return e.abrupt("return",Promise.reject(t));case 27:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}()),r["a"].prototype.$axios=j.a;var E=n("b970"),q=(n("157a"),n("a4b1"),n("5cfb"),n("4de4"),n("5a0c")),C=n.n(q);n("a471");C.a.locale("zh-cn");var T=n("4208");C.a.extend(T),r["a"].prototype.dayjs=C.a,r["a"].filter("dateTo",(function(e){return C()().to(C()(e))})),r["a"].filter("datetime",(function(e){return C()().format("MM-DD HH:mm")})),r["a"].filter("birthday",(function(){return C()().format("YY-MM-DD")})),r["a"].use(E["a"]),r["a"].config.productionTip=!1,new r["a"]({router:y,store:k,render:function(e){return e(h)}}).$mount("#app")},"5d2d":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("53ca"),a=function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(n){return t}},c=function(e,t){"object"===Object(r["a"])(t)&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},u=function(e){window.localStorage.removeItem(e)}},a4b1:function(e,t,n){}});
//# sourceMappingURL=app.a3092839.js.map